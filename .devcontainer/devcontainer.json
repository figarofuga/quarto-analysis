{
  "name": "Quarto analysis",
  "image": "ghcr.io/rocker-org/devcontainer/r-ver:4",

  "features": {
    // 1. システムパッケージ (StanやRのパッケージに必要)
    "ghcr.io/rocker-org/devcontainer-features/apt-packages:1": {
      "packages": "libglpk-dev,libv8-dev,libcairo2-dev,libxt-dev,curl,wget,git,python3-dev,python3-venv,graphviz,libgraphviz-dev,pkg-config"
    },
    // 2. Python (uvを動かす土台)
    // "ghcr.io/devcontainers/features/python:1": {
    //   "version": "3.12",
    //   "installTools": false
    // },
    // 3. Julia
    // "ghcr.io/julialang/devcontainer-features/julia:1": {
    //   "version": "latest"
    // },
    // 4. Quarto
    "ghcr.io/rocker-org/devcontainer-features/quarto-cli:1": {}, 
    "ghcr.io/rocker-org/devcontainer-features/rstudio-server": {}
  },
    "postAttachCommand": {
        "rstudio-start": "rserver"
    },
    "forwardPorts": [
        8787
    ],
    "portsAttributes": {
        "8787": {
            "label": "RStudio IDE"
        }
    },

  "customizations": {
    "vscode": {
      "extensions": [
        "REditorSupport.r",
        "ms-python.python",
        "quarto.quarto",
        "ms-toolsai.jupyter"
      ]
    }
  },

  // 作成後に実行するコマンド
  "postCreateCommand": "bash .devcontainer/init-env.sh"
}
